<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Licensing Roadmap{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Mapbox GL JS CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css' rel='stylesheet' />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    {% block styles %}{% endblock %}
</head>
<body class="dashboard-layout">
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="top-nav-left">
            <span class="top-nav-brand">ğŸ”§ Licensing Roadmap</span>
            <span class="top-nav-subtitle">Professional License Tracking</span>
        </div>
        <div class="top-nav-right">
            <!-- Brag Bar -->
            <div class="brag-bar">
                <a href="/logout" class="btn btn-sm btn-outline-light me-3" style="font-size: 0.75rem; padding: 0.25rem 0.75rem;">
                    ğŸ”’ Logout
                </a>
                <div class="brag-item">
                    <div class="brag-number">{% block brag_licenses %}{{ holder.total_licenses if holder else 29 }}{% endblock %}</div>
                    <div class="brag-label">Licenses</div>
                </div>
                <div class="brag-divider"></div>
                <div class="brag-item">
                    <div class="brag-number">{% block brag_certs %}{{ holder.total_certificates if holder else 42 }}{% endblock %}</div>
                    <div class="brag-label">Certificates</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Layout Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-content">
                <!-- Current User Display -->
                <div class="sidebar-section account-selector-section">
                    <div class="account-display">
                        {% if session.get('user_type') == 'manager' %}
                            <div class="account-icon">ğŸ‘”</div>
                            <div>
                                <div class="account-label">Signed in as</div>
                                <div class="account-name">Department Director</div>
                            </div>
                        {% else %}
                            <div class="account-icon">ğŸ‘¤</div>
                            <div>
                                <div class="account-label">Signed in as</div>
                                <div class="account-name">{{ session.get('name', 'User') }}</div>
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="sidebar-section stats-compact">
                    <div class="stat-compact stat-success">
                        <span class="stat-compact-value">{% block stat_licensed %}{{ stats.licensed if stats else 0 }}{% endblock %}</span>
                        <span class="stat-compact-label">Licensed</span>
                    </div>
                    <div class="stat-compact stat-warning">
                        <span class="stat-compact-value">{% block stat_due %}{{ stats.due_soon if stats and stats.due_soon else 0 }}{% endblock %}</span>
                        <span class="stat-compact-label">Due Soon</span>
                    </div>
                </div>

                <!-- Navigation Section -->
                <div class="sidebar-nav">
                    {% if session.get('user_type') == 'manager' %}
                        <!-- MANAGER/DIRECTOR VIEW -->
                        <a href="/home?account={{ holder.user_id if holder else 'director' }}" class="nav-item">
                            <span class="nav-icon">ğŸ </span>
                            <span class="nav-label">Dashboard</span>
                        </a>
                        <a href="/licensing-roadmap?account={{ holder.user_id if holder else 'director' }}" class="nav-item">
                            <span class="nav-icon">ğŸ—ºï¸</span>
                            <span class="nav-label">Map View</span>
                        </a>
                        <a href="/cost-analytics?account={{ holder.user_id if holder else 'director' }}" class="nav-item">
                            <span class="nav-icon">ğŸ’°</span>
                            <span class="nav-label">Cost Analytics</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <a href="/team/manage?account={{ holder.user_id if holder else 'director' }}" class="nav-item">
                            <span class="nav-icon">ğŸ‘¥</span>
                            <span class="nav-label">Team Members</span>
                        </a>
                        <a href="/manage-licenses?account={{ holder.user_id if holder else 'director' }}" class="nav-item">
                            <span class="nav-icon">ğŸ“œ</span>
                            <span class="nav-label">All Licenses</span>
                        </a>
                        <a href="/import-csv-page" class="nav-item">
                            <span class="nav-icon">ğŸ“¤</span>
                            <span class="nav-label">Import Data</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <a href="/admin/state-encyclopedia" class="nav-item">
                            <span class="nav-icon">ğŸ“š</span>
                            <span class="nav-label">State Encyclopedia</span>
                        </a>
                        <a href="/settings?account={{ holder.user_id if holder else 'director' }}" class="nav-item">
                            <span class="nav-icon">âš™ï¸</span>
                            <span class="nav-label">Settings</span>
                        </a>
                        
                    {% else %}
                        <!-- LICENSE HOLDER VIEW -->
                        <a href="/home?account={{ session.get('user_id', 'bhambrick') }}" class="nav-item">
                            <span class="nav-icon">ğŸ </span>
                            <span class="nav-label">My Dashboard</span>
                        </a>
                        <a href="/licensing-roadmap?account={{ session.get('user_id', 'bhambrick') }}" class="nav-item">
                            <span class="nav-icon">ğŸ—ºï¸</span>
                            <span class="nav-label">My Map View</span>
                        </a>
                        <a href="/manage-licenses?account={{ session.get('user_id', 'bhambrick') }}" class="nav-item">
                            <span class="nav-icon">ğŸ“œ</span>
                            <span class="nav-label">My Licenses</span>
                        </a>
                        <a href="/bio/{{ session.get('user_id', 'bhambrick') }}" class="nav-item">
                            <span class="nav-icon">ğŸ“</span>
                            <span class="nav-label">My Bio</span>
                        </a>
                        
                        <div class="nav-divider"></div>
                        
                        <a href="/states/directory" class="nav-item">
                            <span class="nav-icon">ğŸ“š</span>
                            <span class="nav-label">State Requirements</span>
                        </a>
                        <a href="/settings?account={{ session.get('user_id', 'bhambrick') }}" class="nav-item">
                            <span class="nav-icon">âš™ï¸</span>
                            <span class="nav-label">My Settings</span>
                        </a>
                    {% endif %}
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->        <!-- Main Content Area -->
        <main class="content-area">
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Mapbox GL JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js'></script>
    
    <!-- TopoJSON -->
    <script src="https://unpkg.com/topojson@3"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    <!-- Mapbox Map Script -->
    <script src="{{ url_for('static', filename='js/mapbox-map.js') }}"></script>
    

</body>
</html>
